# Request Simulator

## 需求分析

在进行网站或者爬虫开发的时候，提前了解网站的相关API了解表单提交的格式是十分重要的，最好能自己亲自动手进行相关请求的发送做好实验之后，再进行相关网络通信内容的开发，这样往往能起到事半功倍的效果。

在之前我的相关开发经历当中，进行相关的调试是一个特别繁琐的工作。由于有些语言没有http协议的相关库，只能利用Socket进行相关的网络通信，这就让这个调试阶段变得十分的枯燥和繁琐。如果能够有一款可视化的工具，帮助进行相关请求的模拟发送，提前了解好相关的接口格式并确保自己按照文档已经正确理解，那么这无疑会便利之后的开发。

于是为了实现这样的目标，我以Qt平台为基础，借助其可视化和网络通信的功能简单编写了一个可视化发送网络请求的小工具，用以帮助进行一些http接口的调试工作。该项目通过用户在可视化界面输入请求的URL、参数、数据等内容，自动向服务器提交对应的请求并获取响应。收到响应后，根据用户的需求程序也能够帮助用户进行部分的解析以实现结果的可视化。

该项目需要保证在Windows11环境下的正常运行，依赖于Qt平台开发和运行。同时需要尽量保证可移植性，源码在其他平台上进行编译后仍然可以形成正常运行的软件。

## 开发设计

### 软件结构

该项目文件树如下

```
RequestSimulator
|   .gitignore
|   fileitemwidget.cpp
|   fileitemwidget.h
|   getdialog.cpp
|   getdialog.h
|   jsonparserdialog.cpp
|   jsonparserdialog.h
|   keyvalueitemwidget.cpp
|   keyvalueitemwidget.h
|   logo.qrc
|   main.cpp
|   menudialog.cpp
|   menudialog.h
|   menudialog.ui
|   parse.cpp
|   parse.h
|   postdialog.cpp
|   postdialog.h
|   README.md
|   RequestSimulator.pro
|   RequestSimulator.pro.user
|   specialitemwidget.cpp
|   specialitemwidget.h
|
\---img
    addlogo.png
    deletelogo.png
    networklogo.png
```

主要包括代码文件和一个img文件夹，其中存放着一些静态图标文件

### 界面设计

该项目主要由三级界面组成。

第一级页面是进行模拟格式的选择

![](.\fig\1page.png)

在这一页面用户将选择提交get方法或者post方法。

接下来以post方法为例，展示第二级页面的基本情况

![](.\fig\postpage.png)

该页面主要由四个部分组成。最上方是工具栏，其中可以选择向下方栏中添加相应的选项，或者对返回结果进行解析处理。主界面最上方用来填写请求的URL地址，注意添加请求方法如http，https。Parameters处添加用以附加在URL尾部的参数，这会被组合到URL尾部形成真正的请求URL。Data栏首先用来选择post请求的格式，其次也可以添加相应的请求内容。最后一栏是返回内容展示。

在第二级页面中仍然有一些可以触发的三级页面，比如对返回结果的解析

![](.\fig\3page.png)

这会对返回内容展示栏的字符串进行解析，以更加直观的形式展示返回的结果。

### 设计思路

本项目的开发主要分为两大部分。

一方面是Qt可视化的部分，这需要确保GUI整体的工作流畅和布局设计的合理性，如果把太多的功能直接暴露在用户眼前会产生一种杂乱无章的拥挤感，如果过于分散又会导致用户对项目使用认识的不直观，因此在进行设计时需要平衡好相关的收益与损失，选择较为适中的程度。其次需要保证设计足够直观，就算没有读过相关文档的用户初次使用也能够根据界面按照自觉找到想要的功能在哪个位置。

另一方面是网络通信的部分，这一部分依赖于Qt的Network模块进行开发，需要正确地按照用户在GUI中提交的动作正确地解析出相应的信息，并组织成正确的请求格式向服务器，并正确地取得返回结果后根据需要形成可视化结果向用户展示。这一部分需要和GUI保持很好的协同性，同时需要面对网络编程的一些特殊问题。

本项目的主要思路为提取用户在GUI界面输入的相应输入，用户在相应的输入栏输入数据，点击发送后程序读取用户输入的结果，将其整理为合法的网络请求格式并通过网络通信库的帮助提交给服务器。收到服务器的响应后显示给用户，并根据用户的需求形成可视化界面展示给用户。

### 未来展望

我认为本项目大概完成了初期的目标，但是碍于时间限制有些功能仍然可以进步完善。如果有未来进一步的开发的机会的话可以考虑如下的扩展方向

- 对HTML文件的解析仍然存在问题尚未完善
- 目前只有对响应的解析帮助，缺少对请求头的解析请求
- 可以考虑添加根据请求内容自动生成对应高级语言发送请求代码的内容